{"ast":null,"code":"import _objectSpread from\"/Users/wubin/IdeaProjects/cs510/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/wubin/IdeaProjects/cs510/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wubin/IdeaProjects/cs510/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/wubin/IdeaProjects/cs510/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/wubin/IdeaProjects/cs510/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Modal from\"./components/Modal\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var proxyurl=\"https://cors-anywhere.herokuapp.com/\";var backendurl=\"https://backend.cs411team1.web.illinois.edu/polls/\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.toggle=function(){_this.setState({modal:!_this.state.modal});};_this.handleSubmit=function(item){var flag=_this.state.flag;_this.toggle();var query=item.query;query=query.replaceAll(\" \",\"_\");_this.setState({Q:item.query});console.log(item.query);if(flag===0){axios.get(proxyurl+backendurl+\"getProfessors/\"+\"\".concat(query)).then(function(res){return _this.getProfessorUpdate(res.data,item);});}else if(flag===1){axios.get(proxyurl+backendurl+\"getProfessors/\"+\"\".concat(query)).then(function(res){return _this.getPaperUpdate(res.data,item);});}};_this.createItem=function(){var item={rank:\"\",score:\"\",professor:\"\",homepage:\"\"};_this.setState({flag:0,activeItem:item,modal:!_this.state.modal});};_this.createItem2=function(){var item={professor:\"\",homepage:\"\"};_this.setState({flag:1,activeItem:item,modal:!_this.state.modal});};_this.renderItems=function(){var flag=_this.state.flag;if(flag===1){var newItems=_this.state.paperList;console.log(newItems);return newItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"todo-title mr-2\",title:item.homepage,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d\",children:/*#__PURE__*/_jsx(\"a\",{href:item.homepage,children:item.professor})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"rank: \",item.rank,\", score: \",item.score]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"paper: \",item.paper]})]})},item.rank);});}else{var _newItems=_this.state.resultList;console.log(_newItems);return _newItems.map(function(item){return/*#__PURE__*/_jsx(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"todo-title mr-2\",title:item.homepage,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d\",children:/*#__PURE__*/_jsx(\"a\",{href:item.homepage,children:item.professor})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"rank: \",item.rank,\", score: \",item.score]})]})},item.rank);});}};_this.state={flag:0,resultList:[],paperList:[],modal:false,Q:\"\",activeItem:{query:\"\",rank:\"\",score:0.0,professor:\"\",homepage:\"\",paper:\"\"}};return _this;}_createClass(App,[{key:\"getProfessorUpdate\",value:function getProfessorUpdate(data,item){var templist=[];var temp={rank:\"\",score:\"\",professor:\"\",homepage:\"\",paper:\"\"};for(var i=0;i<data.length;i++){temp=JSON.parse(data[i]);templist.push(temp);}this.setState({resultList:templist});}},{key:\"getPaperUpdate\",value:function getPaperUpdate(data,item){var templist=[];var temp={rank:\"\",score:\"\",professor:\"\",homepage:\"\",paper:\"\"};for(var i=0;i<data.length;i++){temp=JSON.parse(data[i]);temp=_objectSpread(_objectSpread({},temp),{},{paper:\"Conducting Truthful Surveys, Cheaply， Efficiently Learning from Revealed Preference\"});templist.push(temp);}this.setState({paperList:templist});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-black-50 text-uppercase text-center my-4\",children:\"Professor Search Engine\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-10 mx-auto p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"a\",{href:proxyurl,children:[\"Go to \",proxyurl,\" to request temporary access to the demo server\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:this.createItem,children:\"Rank by Professor\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Current Query: \",this.state.Q]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush border-top-0\",children:this.renderItems()})]})})}),this.state.modal?/*#__PURE__*/_jsx(Modal,{activeItem:this.state.activeItem,toggle:this.toggle,onSave:this.handleSubmit}):null]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/wubin/IdeaProjects/cs510/src/App.js"],"names":["React","Component","Modal","axios","proxyurl","backendurl","App","props","toggle","setState","modal","state","handleSubmit","item","flag","query","replaceAll","Q","console","log","get","then","res","getProfessorUpdate","data","getPaperUpdate","createItem","rank","score","professor","homepage","activeItem","createItem2","renderItems","newItems","paperList","map","paper","resultList","templist","temp","i","length","JSON","parse","push"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Modal from \"./components/Modal\";\nimport axios from \"axios\";\n\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\nconst backendurl = \"https://backend.cs411team1.web.illinois.edu/polls/\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      flag: 0,\n      resultList: [],\n      paperList:[],\n      modal: false,\n      Q:\"\",\n      activeItem: {\n        query: \"\",\n        rank:\"\",\n        score:0.0,\n        professor: \"\",\n        homepage: \"\",\n        paper: \"\"\n      },\n    };\n  }\n\n  toggle = () => {\n    this.setState({ modal: !this.state.modal });\n  };\n\n  handleSubmit = (item) => {\n    const flag = this.state.flag;\n    this.toggle();\n    var query = item.query;\n    query = query.replaceAll(\" \",\"_\");\n    this.setState({ Q: item.query});\n    console.log(item.query);\n    if (flag === 0){\n      axios\n          .get(proxyurl+backendurl+\"getProfessors/\"+`${query}`)\n          .then(res => this.getProfessorUpdate(res.data, item));\n    }else if(flag === 1){\n      axios\n          .get(proxyurl+backendurl+\"getProfessors/\"+`${query}`)\n          .then(res => this.getPaperUpdate(res.data, item));\n    }\n  };\n\n  getProfessorUpdate(data, item){\n    var templist = [];\n    var temp = { rank: \"\", score:\"\",professor: \"\", homepage: \"\", paper: \"\"};\n    for (var i=0;i<data.length;i++) {\n      temp = JSON.parse(data[i]);\n      templist.push(temp);\n    }\n    this.setState({ resultList: templist });\n  }\n\n  getPaperUpdate(data, item){\n    var templist = [];\n    var temp = { rank: \"\", score:\"\",professor: \"\", homepage: \"\", paper:\"\"};\n    for (var i=0;i<data.length;i++) {\n      temp = JSON.parse(data[i]);\n      temp = {...temp, paper: \"Conducting Truthful Surveys, Cheaply， Efficiently Learning from Revealed Preference\"}\n      templist.push(temp);\n    }\n    this.setState({ paperList: templist });\n  }\n\n  createItem = () => {\n    const item = { rank: \"\", score:\"\",professor: \"\", homepage: \"\" };\n    this.setState({ flag: 0, activeItem: item, modal: !this.state.modal });\n  };\n\n  createItem2 = () => {\n    const item = { professor: \"\", homepage: \"\" };\n    this.setState({ flag: 1, activeItem: item, modal: !this.state.modal });\n  };\n\n  renderItems = () => {\n    const flag = this.state.flag;\n    if (flag === 1){\n      const newItems = this.state.paperList\n      console.log(newItems)\n      return newItems.map((item) => (\n          <li\n              key={item.rank}\n              className=\"list-group-item d-flex justify-content-between align-items-center\"\n          >\n        <span\n            className={`todo-title mr-2`}\n            title={item.homepage}\n        >\n          <div className=\"d\"><a href={item.homepage}>{item.professor}</a></div>\n          <div>rank: {item.rank}, score: {item.score}</div>\n          <div>paper: {item.paper}</div>\n        </span>\n          </li>\n      ));\n    }else{\n      const newItems = this.state.resultList\n      console.log(newItems)\n      return newItems.map((item) => (\n          <li\n              key={item.rank}\n              className=\"list-group-item d-flex justify-content-between align-items-center\"\n          >\n        <span\n            className={`todo-title mr-2`}\n            title={item.homepage}\n        >\n          <div className=\"d\"><a href={item.homepage}>{item.professor}</a></div>\n          <div>rank: {item.rank}, score: {item.score}</div>\n        </span>\n          </li>\n      ));\n    }\n  };\n\n  render() {\n    return (\n        <main className=\"container\">\n          <h1 className=\"text-black-50 text-uppercase text-center my-4\" >Professor Search Engine</h1>\n          <div className=\"row\">\n            <div className=\"col-md-6 col-sm-10 mx-auto p-0\">\n              <div className=\"card p-3\">\n                <div><a href={proxyurl}>Go to {proxyurl} to request temporary access to the demo server</a></div>\n                <div className=\"mb-4\">\n                  <button\n                      className=\"btn btn-primary\"\n                      onClick={this.createItem}\n                  >\n                    Rank by Professor\n                  </button>\n                  {/*&nbsp;*/}\n                  {/*<button*/}\n                  {/*    className=\"btn btn-primary\"*/}\n                  {/*    onClick={this.createItem2}*/}\n                  {/*>*/}\n                  {/*  Rank by Paper*/}\n                  {/*</button>*/}\n                </div>\n                <div>Current Query: {this.state.Q}</div>\n                {/*{this.renderTabList()}*/}\n                <ul className=\"list-group list-group-flush border-top-0\">\n                  {this.renderItems()}\n                </ul>\n              </div>\n            </div>\n          </div>\n          {this.state.modal ? (\n              <Modal\n                  activeItem={this.state.activeItem}\n                  toggle={this.toggle}\n                  onSave={this.handleSubmit}\n              />\n          ) : null}\n        </main>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}